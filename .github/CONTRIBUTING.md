# Contributing to Orchestra Chrome Plugin

Contributions are **welcome** and will be fully **credited**.

## Development Setup

```bash
# From the plugin directory
cd plugins/chrome

# Build
go build -o orchestra-chrome ./src/cmd/

# Run tests
go test ./... -v

# Lint
golangci-lint run ./...

# Format
gofumpt -w config/ providers/ src/
```

Or from the monorepo root:

```bash
make check    # format + lint + tests for everything
```

### Requirements

- Go 1.23+
- golangci-lint
- gofumpt
- Node.js 20+ and pnpm (for extension build)

## Code Quality

All code must pass before merging:

| Check | Command | Description |
|-------|---------|-------------|
| **Format** | `gofumpt -l config/ providers/ src/` | Must return no output |
| **Lint** | `golangci-lint run ./...` | Zero errors |
| **Test** | `go test ./...` | All tests pass |

## Plugin Structure

```
plugins/chrome/
├── config/           # Plugin configuration
├── providers/        # Bridge to framework plugin system
├── src/
│   ├── cmd/          # CLI entry point (chrome:build)
│   ├── types/        # Type definitions
│   ├── registry/     # Chrome contribution registry
│   └── generator/    # TypeScript + manifest generators
├── resources/
│   └── extension/    # Extension template (React + Vite)
└── docs/             # Documentation
```

## Pull Request Process

1. **Fork** and branch from `master`.
2. **Write tests** for new generators or behavior changes.
3. **Run `golangci-lint run ./...`** — zero errors required.
4. **One PR per feature.**
5. **Update docs** if adding generators or changing output.
6. **Follow [SemVer v2.0.0](https://semver.org/)** — do not break public APIs.

## Conventions

- Generators write deterministic output (sorted by priority/key).
- Use `strings.Builder` for TypeScript code generation.
- All generated files include `// Auto-generated by orchestra/chrome plugin. Do not edit.` header.
- Template source lives in `resources/extension/`, generated output goes to `resources/chrome/`.

**Happy coding!**
